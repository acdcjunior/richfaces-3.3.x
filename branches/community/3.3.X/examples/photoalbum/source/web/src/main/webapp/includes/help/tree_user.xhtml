<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">
	<div class="section">
	<div class="titlepage">
	<div>
	<div>
	<h3 class="title">Navigation tree for a
	registered user</h3>
	</div>
	</div>
	</div>
	<p>As it was mentioned before a navigation tree for a registered
	user has two main features: drag-and-drop and context menu. </p>
	<p>Drag-and-drop feature supported in the Photo Album application
	is not so complicated as it may seem from the first view. In this
	application we can mark out two types of drag-and-drop: one type takes
	place only inside the tree (between tree nodes) and another one -
	between the watching area and the tree. The difference is not
	considerable enough to describe two types separately, but also not at
	all insignificant to be omitted here.</p>
	<p>The tree related components (<span class="bold"><strong><span
		class="property">&lt;rich:tree&gt;</span></strong></span> and <span class="bold"><strong><span
		class="property">&lt;rich:treeNode&gt;</span></strong></span>) have their own
	attributes that provide drag-and-drop functionality. These attributes
	can be divided into two groups: those which provide drag (dragValue,
	dragListener, dragIndicator, dragType attributes) and those which
	provide drop operations (dropValue, dropListener, acceptedTypes,
	typeMapping).</p>
	<div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory"
		class="note">
	<h2>Note:</h2>
	<p>Due to "Shelves - Albums - Photos" hierarchy we can say that
	photos could be moved between albums, albums could be moved between
	shelves. To avoid a mishmash, it's not allowed to place photos directly
	in shelves as well as nesting shelves inside shelves or albums inside
	albums.</p>
	</div>
	<p>Let's explore how drag-and-drop works for albums.</p>
	<p>All albums, that are represented as TreeNodes, must be marked
	somehow for dragging. For this purpose we use previously mentioned <span
		class="emphasis"><em><span class="property">"dragValue"</span></em></span>,
	<span class="emphasis"><em><span class="property">"dragType"</span></em></span>
	attributes. Let's have a look at the <code class="code">src/main/webapp/includes/index/tree.xhtml</code>
	file:</p>
	<pre  xml:space="preserve" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory"
		class="JAVA"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rich:treeNodesAdaptor</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">var</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;album&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">nodes</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;{shelf.albums}&quot;</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">      </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rich:treeNode</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">style</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;cursor:pointer&quot;</span><span
		class="xml_plain"> </span><br />
<span class="xml_plain">                        </span><span
		class="xml_attribute_name">reRender</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;mainArea, treePanel&quot;</span><span
		class="xml_plain"> </span><br />
<span class="xml_plain">                        </span><span
		class="xml_attribute_name">dragType</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;album&quot;</span><span
		class="xml_plain"> </span><br />
<span class="xml_plain">                        </span><span
		class="xml_attribute_name">dragValue</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;{album}&quot;</span><span
		class="xml_plain"> </span><br />
<span class="xml_plain">                        </span><span
		class="xml_attribute_name">dropValue</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;{album}&quot;</span><span
		class="xml_plain"> </span><br />
<span class="xml_plain">                        </span><span
		class="xml_attribute_name">acceptedTypes</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;image&quot;</span><span
		class="xml_plain"> </span><br />
<span class="xml_plain">                        </span><span
		class="xml_attribute_name">selectedClass</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;tree-selected-node&quot;</span><span
		class="xml_plain"> </span><br />
<span class="xml_plain">                        </span><span
		class="xml_attribute_name">icon</span><span class="xml_tag_symbols">=</span><span
		class="xml_attribute_value">&quot;img/shell/tree_icon_album.png&quot;</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">            ...</span><br />
<span class="xml_plain">            </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rich:dndParam</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">name</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;label&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">type</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;drag&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">value</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;{album.name}&quot;</span><span
		class="xml_plain"> </span><span class="xml_tag_symbols">/&gt;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">            ...</span><br />
<span class="xml_plain">      </span><span
		class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">rich:treeNode</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">rich:treeNodesAdaptor</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre>
	<p>To provide drop functionality for the marked albums, we should
	mark Shelves as drop zones in the application code too. For this
	purpose we add the <span class="emphasis"><em><span
		class="property">"dropValue"</span></em></span> and <span class="emphasis"><em><span
		class="property">"acceptedTypes"</span></em></span> attributes to the "Shelf" node
	in the same <code class="code">src/main/webapp/includes/index/tree.xhtml</code>
	file:</p>
	<pre  xml:space="preserve" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory"
		class="JAVA"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rich:treeNodesAdaptor</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">nodes</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;{shelfManager.getUserShelves()}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">var</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;shelf&quot;</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">      </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rich:treeNode</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">style</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;cursor:pointer&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">acceptedTypes</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;album&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">dropValue</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;{shelf}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">reRender</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;mainArea, treePanel&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">selectedClass</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;tree-selected-node&quot;</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">            ...</span><br />
<span class="xml_plain">      </span><span
		class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">rich:treeNode</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">rich:treeNodeAdaptor</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre>
	<p>The <span class="emphasis"><em><span
		class="property">"acceptedTypes"</span></em></span> attribute tells the "Shelf"
	node what types of dragged zones (albums in this case) it can accept.
	We have specified "Album" node <span class="emphasis"><em><span
		class="property">"dragType"</span></em></span> as "album", so the "Shelf" node can
	accept it.</p>
	<p>Finally in order to process drop on the server side we need to
	specify a listener for the <span class="bold"><strong><span
		class="property">&lt;rich:tree&gt;</span></strong></span> in the <span
		class="emphasis"><em><span class="property">"dropListener"</span></em></span>
	attribute (<code class="code">src/main/webapp/includes/index/tree.xhtml</code>
	file):</p>
	<pre  xml:space="preserve" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory"
		class="JAVA"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rich:tree</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">adviseNodeOpened</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;{treeManager.adviseNodeSelected}&quot;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">                  </span><span
		class="xml_attribute_name">adviseNodeSelected</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;{treeManager.adviseNodeSelected}&quot;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">                  </span><span
		class="xml_attribute_name">ajaxSubmitSelection</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;false&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">dragIndicator</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;dragIndicator&quot;</span><span
		class="xml_plain"> </span><br />
<span class="xml_plain">                  </span><span
		class="xml_attribute_name">treeNodeVar</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;treeNode&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">switchType</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;client&quot;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">                  </span><span
		class="xml_attribute_name">iconCollapsed</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/img/shell/tree_icon_plus.png&quot;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">                  </span><span
		class="xml_attribute_name">iconExpanded</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/img/shell/tree_icon_minus.png&quot;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">                  </span><span
		class="xml_attribute_name">dropListener</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;{dndManager.processDrop}&quot;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">                  </span><span
		class="xml_attribute_name">showConnectingLines</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;false&quot;</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">            ...</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">tree</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre>
	<p>The code for the <span class="bold"><strong><span
		class="property">&lt;rich:dragIndicator&gt;</span></strong></span> looks like the
	following:</p>
	<pre  xml:space="preserve" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory"
		class="JAVA"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rich:dragIndicator</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">id</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;dragIndicator&quot;</span><span
		class="xml_plain"> </span><span class="xml_tag_symbols">/&gt;</span><span
		class="xml_plain"></span><br />
</pre>
	<p>The <code class="code">processDrop()</code> method of <code
		class="code">DnDManager.java</code> class is shown in the listing
	below:</p>
	<pre  xml:space="preserve" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory"
		class="JAVA"><!-- <br/> --><span class="java_separator">...</span>
<!--  --><br /><span class="java_keyword">public</span><span
		class="java_plain"> </span><span class="java_type">void</span><span
		class="java_plain"> processDrop</span><span
		class="java_separator">(</span><span class="java_type">DropEvent</span><span
		class="java_plain"> dropEvent</span><span class="java_separator">)</span><span
		class="java_plain"> </span><span class="java_separator">{</span>
<!--  --><br /><span class="java_plain">      </span><span
		class="java_type">Dropzone</span><span class="java_plain"> dropzone </span><span
		class="java_operator">=</span><span class="java_plain"> </span><span
		class="java_separator">(</span><span class="java_type">Dropzone</span><span
		class="java_separator">)</span><span class="java_plain"> dropEvent</span><span
		class="java_separator">.</span><span class="java_plain">getComponent</span><span
		class="java_separator">();</span>
<!--  --><br /><span class="java_plain">      </span><span
		class="java_type">Object</span><span class="java_plain"> dragValue </span><span
		class="java_operator">=</span><span class="java_plain"> dropEvent</span><span
		class="java_separator">.</span><span class="java_plain">getDragValue</span><span
		class="java_separator">();</span>
<!--  --><br /><span class="java_plain">      </span><span
		class="java_type">Object</span><span class="java_plain"> dropValue </span><span
		class="java_operator">=</span><span class="java_plain"> dropzone</span><span
		class="java_separator">.</span><span class="java_plain">getDropValue</span><span
		class="java_separator">();</span>
<!--  --><br /><span class="java_plain">      </span><span
		class="java_keyword">if</span><span class="java_separator">(</span><span
		class="java_plain">dragValue </span><span class="java_keyword">instanceof</span><span
		class="java_plain"> </span><span class="java_type">Image</span><span
		class="java_separator">){</span>
<!--  --><br /><span class="java_plain">            </span><span
		class="java_keyword">if</span><span class="java_separator">(</span><span
		class="java_operator">!</span><span class="java_separator">((</span><span
		class="java_type">Album</span><span class="java_separator">)</span><span
		class="java_plain">dropValue</span><span class="java_separator">).</span><span
		class="java_plain">getOwner</span><span class="java_separator">().</span><span
		class="java_plain">getLogin</span><span class="java_separator">().</span><span
		class="java_plain">equals</span><span class="java_separator">(</span><span
		class="java_plain">user</span><span class="java_separator">.</span><span
		class="java_plain">getLogin</span><span class="java_separator">())){</span>
<!--  --><br /><span class="java_plain">                  </span><span
		class="java_type">Events</span><span class="java_separator">.</span><span
		class="java_plain">instance</span><span class="java_separator">().</span><span
		class="java_plain">raiseEvent</span><span class="java_separator">(</span><span
		class="java_type">Constants</span><span class="java_separator">.</span><span
		class="java_plain">ADD_ERROR_EVENT</span><span class="java_separator">,</span><span
		class="java_plain"> </span><span class="java_type">Constants</span><span
		class="java_separator">.</span><span class="java_plain">DND_PHOTO_ERROR</span><span
		class="java_separator">);</span>
<!--  --><br /><span class="java_plain">                  </span><span
		class="java_keyword">return</span><span class="java_separator">;</span>
<!--  --><br /><span class="java_plain">            </span><span
		class="java_separator">}</span>
<!--  --><br /><span class="java_plain">            handleImage</span><span
		class="java_separator">((</span><span class="java_type">Image</span><span
		class="java_separator">)</span><span class="java_plain">dragValue</span><span
		class="java_separator">,</span><span class="java_plain"> </span><span
		class="java_separator">(</span><span class="java_type">Album</span><span
		class="java_separator">)</span><span class="java_plain">dropValue</span><span
		class="java_separator">);</span><span class="java_plain">    </span>
<!--  --><br /><span class="java_plain">      </span><span
		class="java_separator">}</span><span class="java_keyword">else</span><span
		class="java_plain"> </span><span class="java_keyword">if</span><span
		class="java_separator">(</span><span class="java_plain">dragValue </span><span
		class="java_keyword">instanceof</span><span class="java_plain"> </span><span
		class="java_type">Album</span><span class="java_separator">){</span>
<!--  --><br /><span class="java_plain">            </span><span
		class="java_keyword">if</span><span class="java_separator">(</span><span
		class="java_operator">!</span><span class="java_separator">((</span><span
		class="java_type">Shelf</span><span class="java_separator">)</span><span
		class="java_plain">dropValue</span><span class="java_separator">).</span><span
		class="java_plain">getOwner</span><span class="java_separator">().</span><span
		class="java_plain">getLogin</span><span class="java_separator">().</span><span
		class="java_plain">equals</span><span class="java_separator">(</span><span
		class="java_plain">user</span><span class="java_separator">.</span><span
		class="java_plain">getLogin</span><span class="java_separator">())){</span>
<!--  --><br /><span class="java_plain">                  </span><span
		class="java_type">Events</span><span class="java_separator">.</span><span
		class="java_plain">instance</span><span class="java_separator">().</span><span
		class="java_plain">raiseEvent</span><span class="java_separator">(</span><span
		class="java_type">Constants</span><span class="java_separator">.</span><span
		class="java_plain">ADD_ERROR_EVENT</span><span class="java_separator">,</span><span
		class="java_plain"> </span><span class="java_type">Constants</span><span
		class="java_separator">.</span><span class="java_plain">DND_ALBUM_ERROR</span><span
		class="java_separator">);</span>
<!--  --><br /><span class="java_plain">                  </span><span
		class="java_keyword">return</span><span class="java_separator">;</span>
<!--  --><br /><span class="java_plain">            </span><span
		class="java_separator">}</span>
<!--  --><br /><span class="java_plain">            handleAlbum</span><span
		class="java_separator">((</span><span class="java_type">Album</span><span
		class="java_separator">)</span><span class="java_plain">dragValue</span><span
		class="java_separator">,</span><span class="java_plain"> </span><span
		class="java_separator">(</span><span class="java_type">Shelf</span><span
		class="java_separator">)</span><span class="java_plain">dropValue</span><span
		class="java_separator">);</span>
<!--  --><br /><span class="java_plain">      </span><span
		class="java_separator">}</span>
<!--  --><br /><span class="java_separator">}</span>
<!--  --><br /><span class="java_separator">...</span></pre>
	<p>Here is the whole example of the "Navigation tree for a
	registered user":</p>
	<pre  xml:space="preserve" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory"
		class="JAVA"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:panelGroup</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">id</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;tree&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">rendered</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;{identity.hasRole('admin')}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">layout</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;block&quot;</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">        </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">a4j:commandLink</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">actionListener</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;{controller.selectShelves()}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">reRender</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;mainArea, treePanel&quot;</span><span
		class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">h2</span><span
		class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">h:outputText</span><span
		class="xml_plain">  </span><span class="xml_attribute_name">value</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;My shelves:&quot;</span><span
		class="xml_tag_symbols">/&gt;&lt;/</span><span class="xml_tag_name">h2</span><span
		class="xml_tag_symbols">&gt;&lt;/</span><br /><span class="xml_tag_name">a4j:commandLink</span><span
		class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">br</span><span
		class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">    </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rich:dragIndicator</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">            </span><span
		class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span
		class="xml_attribute_value">&quot;dragIndicator&quot;</span><span
		class="xml_plain"> </span><span class="xml_tag_symbols">/&gt;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">        </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rich:tree</span><span
		class="xml_plain"> </span><br />
<span class="xml_plain">            </span><span
		class="xml_attribute_name">adviseNodeOpened</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;{treeManager.adviseNodeSelected}&quot;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">            </span><span
		class="xml_attribute_name">adviseNodeSelected</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;{treeManager.adviseNodeSelected}&quot;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">            </span><span
		class="xml_attribute_name">ajaxSubmitSelection</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;false&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">dragIndicator</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;dragIndicator&quot;</span><span
		class="xml_plain"> </span><br />
<span class="xml_plain">            </span><span
		class="xml_attribute_name">treeNodeVar</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;treeNode&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">switchType</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;client&quot;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">            </span><span
		class="xml_attribute_name">iconCollapsed</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/img/shell/tree_icon_plus.png&quot;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">            </span><span
		class="xml_attribute_name">iconExpanded</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/img/shell/tree_icon_minus.png&quot;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">            </span><span
		class="xml_attribute_name">dropListener</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;{dndManager.processDrop}&quot;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">            </span><span
		class="xml_attribute_name">showConnectingLines</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;false&quot;</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">             </span><br />
<span class="xml_plain">                </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:facet</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">name</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;icon&quot;</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">                    </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:graphicImage</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">style</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;border: none&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">value</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/img/shell/tree_icon_shelf.png&quot;</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">                            </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">a4j:support</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">reRender</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;treePanel, mainArea&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">event</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;onclick&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">actionListener</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;{controller.showShelf(shelf)}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">similarityGroupingId</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;sel&quot;</span><span
		class="xml_plain"> </span><span class="xml_tag_symbols">/&gt;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">                    </span><span
		class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:graphicImage</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">                </span><span
		class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">f:facet</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">                </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ui:include</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">src</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/includes/contextMenu/CMForShelf.xhtml&quot;</span><span
		class="xml_plain"> </span><span class="xml_tag_symbols">&gt;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">                    </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ui:param</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">name</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;shelf&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">value</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;{shelf}&quot;</span><span
		class="xml_plain"> </span><span class="xml_tag_symbols">/&gt;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">                </span><span
		class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ui:include</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">                </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">a4j:outputPanel</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">                    </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">style</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;cursor:pointer&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">value</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;{shelf.name}&quot;</span><span
		class="xml_plain"> </span><span class="xml_tag_symbols">/&gt;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">                    </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">value</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; :: &quot;</span><span
		class="xml_plain"> </span><span class="xml_tag_symbols">/&gt;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">                    </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">strong</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain">{shelf.unvisitedImages.size()}</span><span
		class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">strong</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"> new</span><br />
<span class="xml_plain">                    </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">a4j:support</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">reRender</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;treePanel, mainArea&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">event</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;onclick&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">actionListener</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;{controller.showShelf(shelf)}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">similarityGroupingId</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;sel&quot;</span><span
		class="xml_plain"> </span><span class="xml_tag_symbols">/&gt;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">                </span><span
		class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">a4j:outputPanel</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">                </span><span
		class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">rich:treeNode</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">                </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rich:treeNodesAdaptor</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">var</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;album&quot;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">                    </span><span
		class="xml_attribute_name">nodes</span><span class="xml_tag_symbols">=</span><span
		class="xml_attribute_value">&quot;{shelf.albums}&quot;</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">                    </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rich:treeNode</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">style</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;cursor:pointer&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">reRender</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;mainArea, treePanel&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">dragType</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;album&quot;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">                        </span><span
		class="xml_attribute_name">dragValue</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;{album}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">dropValue</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;{album}&quot;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">                        </span><span
		class="xml_attribute_name">acceptedTypes</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;image&quot;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">                        </span><span
		class="xml_attribute_name">selectedClass</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;tree-selected-node&quot;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">                        </span><span
		class="xml_attribute_name">icon</span><span class="xml_tag_symbols">=</span><span
		class="xml_attribute_value">&quot;img/shell/tree_icon_album.png&quot;</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">                        </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:facet</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">name</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;iconLeaf&quot;</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">                            </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:graphicImage</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">style</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;border: none&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">value</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;img/shell/tree_icon_album.png&quot;</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">                                    </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">a4j:support</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">reRender</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;treePanel, mainArea&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">event</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;onclick&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">actionListener</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;{controller.showAlbum(album)}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">similarityGroupingId</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;sel&quot;</span><span
		class="xml_plain"> </span><span class="xml_tag_symbols">/&gt;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">                            </span><span
		class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:graphicImage</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">                        </span><span
		class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">f:facet</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">                        </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ui:include</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">src</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/includes/contextMenu/CMForAlbum.xhtml&quot;</span><span
		class="xml_plain"> </span><span class="xml_tag_symbols">&gt;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">                        </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ui:param</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">name</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;album&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">value</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;{album}&quot;</span><span
		class="xml_plain"> </span><span class="xml_tag_symbols">/&gt;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">                        </span><span
		class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ui:include</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">                        </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rich:dndParam</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">name</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;label&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">type</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;drag&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">value</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;{album.name}&quot;</span><span
		class="xml_plain"> </span><span class="xml_tag_symbols">/&gt;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">                        </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">a4j:outputPanel</span><span
		class="xml_plain"> </span><span class="xml_tag_symbols">&gt;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">                            </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">style</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;cursor:pointer&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">value</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;{album.name}&quot;</span><span
		class="xml_plain"> </span><span class="xml_tag_symbols">/&gt;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">                            </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">value</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; :: &quot;</span><span
		class="xml_plain"> </span><span class="xml_tag_symbols">/&gt;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">                                </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">strong</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain">{album.unvisitedImages.size()}</span><span
		class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">strong</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"> new</span><br />
<span class="xml_plain">                        </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">a4j:support</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">reRender</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;treePanel, mainArea&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">event</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;onclick&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">actionListener</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;{controller.showAlbum(album)}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">similarityGroupingId</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;sel&quot;</span><span
		class="xml_plain"> </span><span class="xml_tag_symbols">/&gt;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">                        </span><span
		class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">a4j:outputPanel</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">                </span><span
		class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">rich:treeNode</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">                </span><span
		class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">rich:treeNodesAdaptor</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">            </span><span
		class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">rich:treeNodesAdaptor</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">        </span><span
		class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">rich:tree</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">        </span><span
		class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:panelGroup</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre>
	<p>The image below shows how the described above drag-and-drop
	features are rendered in the Photo Album.</p>
	<div class="figure">
	<div class="figure-contents">
	<div class="mediaobject"><img src="img/help/dnd.png"
		alt="" /></div>
	</div>
	
	</div>
	<br class="figure-break" />
	<p>Vizit following pages at RichFaces Live Demo for more
	information, examples and sources on the components used in the
	application and described in this chapter:</p>
	<div class="itemizedlist">
	<ul>
		<li>
		<p><a target="_blank" xmlns:xlink="http://www.w3.org/1999/xlink"
			href="http://livedemo.exadel.com/richfaces-demo/richfaces/tree.jsf?c=tree">Tree</a>
		for the <span class="bold"><strong><span
			class="property">&lt;rich:tree&gt;</span></strong></span> component;</p>
		</li>
		<li>
		<p><a target="_blank" xmlns:xlink="http://www.w3.org/1999/xlink"
			href="http://livedemo.exadel.com/richfaces-demo/richfaces/treeNodesAdaptor.jsf?c=treeNodesAdaptor">TreeNodesAdaptor</a>
		for the <span class="bold"><strong><span
			class="property">&lt;rich:treeNodesAdaptor&gt;</span></strong></span> component;</p>
		</li>
		<li>
		<p><a target="_blank" xmlns:xlink="http://www.w3.org/1999/xlink"
			href="http://livedemo.exadel.com/richfaces-demo/richfaces/dragSupport.jsf?c=dragIndicator">DragIndicator</a>
		for the <span class="bold"><strong><span
			class="property">&lt;rich:dragIndicator&gt;</span></strong></span> component;</p>
		</li>
		<li>
		<p><a target="_blank" xmlns:xlink="http://www.w3.org/1999/xlink"
			href="http://livedemo.exadel.com/richfaces-demo/richfaces/dragSupport.jsf?c=dndParam">DragDropParameter</a>
		for the <span class="bold"><strong><span
			class="property">&lt;rich:dndParam&gt;</span></strong></span> component.</p>
		</li>
	</ul>
	</div>
	</div>
</ui:composition>