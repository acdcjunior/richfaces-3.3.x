<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">
	<div class="section" lang="en-US">
	<div class="titlepage">
	<div>
	<div>
	<h2 class="title">Error checking mechanism.</h2>
	</div>
	</div>
	</div>
	<p>The Photo Album application has a global mechanism for errors
	checking. You become informed about the error each time it occurs. It
	is possible because the main page of the application <code class="code">web/src/main/webapp/index.xhtml
	</code> includes the <code class="code">web/src/main/webapp/includes/misc/errorPanel.xhtml</code>:
	</p>
	<pre  xml:space="preserve" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory"
		class="JAVA"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">...</span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">a4j:outputPanel</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">id</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;errors&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">ajaxRendered</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">        </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:panelGroup</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">rendered</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;{errorHandlerBean.errorExist}&quot;</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">            </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">rich:modalPanel</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">id</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;errorPanel&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">showWhenRendered</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">minWidth</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;300&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">minHeight</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;200&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">autosized</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">                      ...</span><br />
<span class="xml_plain">            </span><span
		class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">rich:modalPanel</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">      </span><span
		class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:panelGroup</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">a4j:outputPanel</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">...</span><br />
</pre>
	<p>Here is the listing of the <code class="code">errorHandlerBean</code>
	class:</p>
	<pre  xml:space="preserve" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory"
		class="JAVA"><!-- <br/> --><span class="java_keyword">package</span><!-- <br/> --><span
		class="java_plain"> org</span><!-- <br/> --><span
		class="java_separator">.</span><!-- <br/> --><span class="java_plain">richfaces</span><!-- <br/> --><span
		class="java_separator">.</span><!-- <br/> --><span class="java_plain">photoalbum</span><!-- <br/> --><span
		class="java_separator">.</span><!-- <br/> --><span class="java_plain">ui</span><!-- <br/> --><span
		class="java_separator">;</span>
<!--  --><br /><span class="java_keyword">import</span><span
		class="java_plain"> java</span><span class="java_separator">.</span><span
		class="java_plain">util</span><span class="java_separator">.</span><span
		class="java_type">ArrayList</span><span class="java_separator">;</span>
<!--  --><br /><span class="java_keyword">import</span><span
		class="java_plain"> java</span><span class="java_separator">.</span><span
		class="java_plain">util</span><span class="java_separator">.</span><span
		class="java_type">List</span><span class="java_separator">;</span>
<!--  --><br /><span class="java_keyword">import</span><span
		class="java_plain"> org</span><span class="java_separator">.</span><span
		class="java_plain">jboss</span><span class="java_separator">.</span><span
		class="java_plain">seam</span><span class="java_separator">.</span><span
		class="java_type">ScopeType</span><span class="java_separator">;</span>
<!--  --><br /><span class="java_keyword">import</span><span
		class="java_plain"> org</span><span class="java_separator">.</span><span
		class="java_plain">jboss</span><span class="java_separator">.</span><span
		class="java_plain">seam</span><span class="java_separator">.</span><span
		class="java_plain">annotations</span><span class="java_separator">.</span><span
		class="java_type">AutoCreate</span><span class="java_separator">;</span>
<!--  --><br /><span class="java_keyword">import</span><span
		class="java_plain"> org</span><span class="java_separator">.</span><span
		class="java_plain">jboss</span><span class="java_separator">.</span><span
		class="java_plain">seam</span><span class="java_separator">.</span><span
		class="java_plain">annotations</span><span class="java_separator">.</span><span
		class="java_type">Name</span><span class="java_separator">;</span>
<!--  --><br /><span class="java_keyword">import</span><span
		class="java_plain"> org</span><span class="java_separator">.</span><span
		class="java_plain">jboss</span><span class="java_separator">.</span><span
		class="java_plain">seam</span><span class="java_separator">.</span><span
		class="java_plain">annotations</span><span class="java_separator">.</span><span
		class="java_type">Observer</span><span class="java_separator">;</span>
<!--  --><br /><span class="java_keyword">import</span><span
		class="java_plain"> org</span><span class="java_separator">.</span><span
		class="java_plain">jboss</span><span class="java_separator">.</span><span
		class="java_plain">seam</span><span class="java_separator">.</span><span
		class="java_plain">annotations</span><span class="java_separator">.</span><span
		class="java_type">Scope</span><span class="java_separator">;</span>
<!--  --><br /><span class="java_keyword">import</span><span
		class="java_plain"> org</span><span class="java_separator">.</span><span
		class="java_plain">richfaces</span><span class="java_separator">.</span><span
		class="java_plain">photoalbum</span><span class="java_separator">.</span><span
		class="java_plain">service</span><span class="java_separator">.</span><span
		class="java_type">Constants</span><span class="java_separator">;</span>
<!--  --><br /><span class="java_plain">@</span><span class="java_type">Name</span><span
		class="java_separator">(</span><span class="java_literal">&quot;errorHandlerBean&quot;</span><span
		class="java_separator">)</span>
<!--  --><br /><span class="java_plain">@</span><span class="java_type">Scope</span><span
		class="java_separator">(</span><span class="java_type">ScopeType</span><span
		class="java_separator">.</span><span class="java_plain">EVENT</span><span
		class="java_separator">)</span>
<!--  --><br /><span class="java_plain">@</span><span class="java_type">AutoCreate</span>
<!--  --><br /><span class="java_keyword">public</span><span
		class="java_plain"> </span><span class="java_keyword">class</span><span
		class="java_plain"> </span><span class="java_type">ErrorHandlerBean</span><span
		class="java_plain"> </span><span class="java_separator">{</span>
<!--  --><br /><span class="java_plain">    </span><span
		class="java_keyword">private</span><span class="java_plain"> </span><span
		class="java_type">List</span><span class="java_operator">&lt;</span><span
		class="java_type">String</span><span class="java_operator">&gt;</span><span
		class="java_plain"> errors </span><span
		class="java_operator">=</span><span class="java_plain"> </span><span
		class="java_keyword">new</span><span class="java_plain"> </span><span
		class="java_type">ArrayList</span><span class="java_operator">&lt;</span><span
		class="java_type">String</span><span class="java_operator">&gt;</span><span
		class="java_separator">();</span>
<!--  --><br /><span class="java_plain">    </span><span
		class="java_keyword">public</span><span class="java_plain"> </span><span
		class="java_type">List</span><span class="java_operator">&lt;</span><span
		class="java_type">String</span><span class="java_operator">&gt;</span><span
		class="java_plain"> getErrors</span><span class="java_separator">()</span><span
		class="java_plain"> </span><span class="java_separator">{</span>
<!--  --><br /><span class="java_plain">        </span><span
		class="java_keyword">return</span><span class="java_plain"> errors</span><span
		class="java_separator">;</span>
<!--  --><br /><span class="java_plain">    </span><span
		class="java_separator">}</span>
<!--  --><br /><span class="java_plain">    </span>
<!--  --><br /><span class="java_plain">    </span><span
		class="java_keyword">public</span><span class="java_plain"> </span><span
		class="java_type">boolean</span><span class="java_plain"> isErrorExist</span><span
		class="java_separator">(){</span>
<!--  --><br /><span class="java_plain">        </span><span
		class="java_keyword">return</span><span class="java_plain"> errors</span><span
		class="java_separator">.</span><span class="java_plain">size</span><span
		class="java_separator">()</span><span class="java_plain"> </span><span
		class="java_operator">&gt;</span><span class="java_plain"> </span><span
		class="java_literal">0</span><span class="java_plain"> </span><span
		class="java_separator">;</span>
<!--  --><br /><span class="java_plain">    </span><span
		class="java_separator">}</span>
<!--  --><br /><span class="java_plain">    </span>
<!--  --><br /><span class="java_plain">    @</span><span
		class="java_type">Observer</span><span class="java_separator">(</span><span
		class="java_type">Constants</span><span class="java_separator">.</span><span
		class="java_plain">ADD_ERROR_EVENT</span><span class="java_separator">)</span>
<!--  --><br /><span class="java_plain">    </span><span
		class="java_keyword">public</span><span class="java_plain"> </span><span
		class="java_type">void</span><span class="java_plain"> addToErrors</span><span
		class="java_separator">(</span><span class="java_type">String</span><span
		class="java_plain"> e</span><span class="java_separator">){</span>
<!--  --><br /><span class="java_plain">        errors</span><span
		class="java_separator">.</span><span class="java_plain">add</span><span
		class="java_separator">(</span><span class="java_plain">e</span><span
		class="java_separator">);</span>
<!--  --><br /><span class="java_plain">    </span><span
		class="java_separator">}</span>
<!--  --><br /><span class="java_separator">}</span></pre>
	<p>The error panel contains the <span class="bold"><strong><span
		class="property">&lt;a4j:outputPanel&gt;</span></strong></span> component that is
	rendered on every Ajax request (<code class="code">ajaxRendered="true"</code>).
	If an error is occurred the <code class="code">isErrorExist()</code>
	method of <code class="code">errorHandlerBean</code> class returns
	"true", so the <span class="bold"><strong><span
		class="property">&lt;h:panelGroup&gt;</span></strong></span> component is rendered. In
	order to show nested <span class="bold"><strong><span
		class="property">&lt;rich:modalPanel&gt;</span></strong></span> component with the
	collected errors the <span class="emphasis"><em><span
		class="property">"showWhenRendered"</span></em></span> attribute should be set to
	"true".</p>
	<p>The <code class="code">addToErrors()</code> method is annotated
	with <code class="code">@Observer</code> annotation, thus it observes
	all events with <code class="code">ADD_ERROR_EVENT</code> constant and
	adds errors to the <code class="code">errors</code> List.</p>
	</div>

</ui:composition>