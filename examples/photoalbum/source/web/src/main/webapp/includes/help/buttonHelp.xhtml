<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">
	<div class="section" lang="en-US">
	<div class="titlepage">
	<div>
	<div>
	<h2 class="title">How the button is created
	and how it acts</h2>
	</div>
	</div>
	</div>
	<p>Due to specific design of the buttons in the Photo Album
	application, it's necessary to clarify some design and development
	points about the button. The button is visually represented by Facelets
	template stored in the <span class="property">button.xhtml</span> file.

	</p>
	<p>Please have a look at the content of the file:</p>
	<pre xml:space="preserve" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory"
		class="JAVA"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">...</span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ui:composition</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">xmlns</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/1999/xhtml&quot;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">    </span><span
		class="xml_attribute_name">xmlns:s</span><span class="xml_tag_symbols">=</span><span
		class="xml_attribute_value">&quot;http://jboss.com/products/seam/taglib&quot;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">    </span><span
		class="xml_attribute_name">xmlns:c</span><span class="xml_tag_symbols">=</span><span
		class="xml_attribute_value">&quot;http://java.sun.com/jstl/core&quot;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">    </span><span
		class="xml_attribute_name">xmlns:ui</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/jsf/facelets&quot;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">    </span><span
		class="xml_attribute_name">xmlns:f</span><span class="xml_tag_symbols">=</span><span
		class="xml_attribute_value">&quot;http://java.sun.com/jsf/core&quot;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">    </span><span
		class="xml_attribute_name">xmlns:h</span><span class="xml_tag_symbols">=</span><span
		class="xml_attribute_value">&quot;http://java.sun.com/jsf/html&quot;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">    </span><span
		class="xml_attribute_name">xmlns:rich</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://richfaces.org/rich&quot;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">    </span><span
		class="xml_attribute_name">xmlns:a4j</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://richfaces.org/a4j&quot;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">    </span><span
		class="xml_attribute_name">xmlns:richx</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://richfaces.org/richx&quot;</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">    </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">a4j:loadScript</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">src</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/scripts/buttons.js&quot;</span><span
		class="xml_plain"> </span><span class="xml_tag_symbols">/&gt;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">    </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">richx:actionMapper</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">        </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">a4j:outputPanel</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">layout</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;block&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">style</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {style}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">styleClass</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;photoalbumButton  {styleClass}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">lang</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {lang}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">dir</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {dir}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">title</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {title}&quot;</span><span
		class="xml_plain"> </span><br />
<span class="xml_plain">            </span><span
		class="xml_attribute_name">rendered</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {empty rendered or rendered}&quot;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">            </span><span
		class="xml_attribute_name">onmousedown</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;RF_RW_DEMO.toPressed(this)&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">onmouseup</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;RF_RW_DEMO.toReleased(this)&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">onmouseout</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;RF_RW_DEMO.toReleased(this)&quot;</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">                </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:graphicImage</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">value</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/img/shell/button.png&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">alt</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;&quot;</span><span
		class="xml_plain"> </span><span class="xml_tag_symbols">/&gt;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">                </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:graphicImage</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">value</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/img/shell/button_press.png&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">style</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;display: none;&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">alt</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;&quot;</span><span
		class="xml_plain"> </span><span class="xml_tag_symbols">/&gt;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">                </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"> {value}</span><span
		class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">                </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">a4j:commandButton</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">accesskey</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {accesskey}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">ajaxSingle</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {ajaxSingle}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">alt</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {alt}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">type</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;image&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">image</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/img/shell/spacer.gif&quot;</span><span
		class="xml_plain"> </span><br />
<span class="xml_plain">                    </span><span
		class="xml_attribute_name">actionListener</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {mappedActionListener}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">action</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {mappedAction}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">bypassUpdates</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {bypassUpdates}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">data</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {data}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">disabled</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {disabled}&quot;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">                    </span><span
		class="xml_attribute_name">eventsQueue</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {eventsQueue}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">focus</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {focus}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">ignoreDupResponses</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {ignoreDupResponses}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">immediate</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {immediate}&quot;</span><span
		class="xml_plain"> </span><br /><span class="xml_attribute_name">limitToList</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {limitToList}&quot;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">                    </span><span
		class="xml_attribute_name">onbeforedomupdate</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {onbeforedomupdate}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">timeout</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {timeout}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">tabindex</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {tabindex}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">status</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {status}&quot;</span><span
		class="xml_plain"> </span><br /><span class="xml_attribute_name">similarityGroupingId</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {similarityGroupingId}&quot;</span><span
		class="xml_plain"> </span>
<span class="xml_plain">                    </span><span
		class="xml_attribute_name">reRender</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {reRender}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">requestDelay</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {requestDelay}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">process</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {process}&quot;</span><span
		class="xml_plain"> </span><br /><span class="xml_attribute_name">oncomplete</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {oncomplete}&quot;</span><span
		class="xml_plain"> </span>
<span class="xml_plain">                    </span><span
		class="xml_attribute_name">onblur</span><span class="xml_tag_symbols">=</span><span
		class="xml_attribute_value">&quot; {onblur}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">onclick</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {onclick}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">ondblclick</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {ondblclick}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">onfocus</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {onfocus}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">onkeydown</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {onkeydown}&quot;</span><span
		class="xml_plain"> </span><br /><span class="xml_attribute_name">onkeypress</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {onkeypress}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">onkeyup</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {onkeyup}&quot;</span><span
		class="xml_plain"> </span><br />
<span class="xml_plain">                    </span><span
		class="xml_attribute_name">onmousedown</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {onmousedown}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">onmousemove</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {onmousemove}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">onmouseout</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {onmouseout}&quot;</span><span
		class="xml_plain"> </span><br /><span class="xml_attribute_name">onmouseover</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {onmouseover}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">onmouseup</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {onmouseup}&quot;</span><span
		class="xml_plain"> </span><span class="xml_tag_symbols">/&gt;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">        </span><span
		class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">a4j:outputPanel</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">    </span><span
		class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">richx:actionMapper</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">ui:composition</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">...</span><br />
</pre>
	<p>The <span class="bold"><strong> <span
		class="property">&lt;richx:actionMapper&gt;</span></strong></span> tag is covered in
	more detail further in the text. In brief, it's a special tag developed
	deliberately to pass to the button a method expression of the action
	which must be performed when the button is clicked.</p>
	<p>To make sure the button works correctly we include the required
	JavaScript code that is located in the button.js file using <code
		class="code"> &lt;a4j:loadScript src="/scripts/buttons.js"
	/&gt; </code> component.</p>
	<p>The button consists of several parts:</p>
	<div class="itemizedlist">
	<ul>
		<li>
		<p>2 images (pressed and not pressed)</p>
		</li>
		<li>
		<p>&lt;div&gt; element that displays the button's text</p>
		</li>
		<li>
		<p><span class="bold"><strong><span
			class="property">&lt;a4j:commandButton&gt;</span></strong></span> that sends Ajax
		request to the server</p>
		</li>
	</ul>
	</div>
	<p>These elements are wrapped by <span class="bold"><strong><span
		class="property">&lt;a4j:outputPanel&gt;</span></strong></span> to adjust the
	look-and-feel.</p>
	<p>In the application the button is used for example like this:</p>
	<pre  xml:space="preserve" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory"
		class="JAVA"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">...</span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">richx:commandButton</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">actionListener</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {authenticator.register(user)}&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">reRender</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;mainform, headerPanel&quot;</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">value</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot; {messages['user.register']}&quot;</span><span
		class="xml_plain"> </span><span class="xml_tag_symbols">/&gt;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">...</span><br />
</pre>
	<p>We can pass to the <span class="bold"><strong><span
		class="property">&lt;richx:commandButton&gt;</span></strong></span> all required
	attributes, in the example only actionListener, reRender and value are
	passed.</p>
	<p><span class="bold"><strong><span
		class="property">&lt;richx:commandButton&gt;</span></strong></span> is a custom tag
	that is declared in the photoalbum-taglib.xml tag library:</p>
	<pre  xml:space="preserve" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory"
		class="JAVA"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">...</span><br />
<span class="xml_processing_instruction">&lt;?xml version=&quot;1.0&quot;?&gt;</span><span
		class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span
		class="xml_attribute_name">DOCTYPE</span><span class="xml_plain"> </span><span
		class="xml_attribute_name">facelet-taglib</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">PUBLIC</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">  </span><span
		class="xml_attribute_value">&quot;-//Sun Microsystems, Inc.//DTD Facelet Taglib 1.0//EN&quot;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">  </span><span
		class="xml_attribute_value">&quot;facelet-taglib_1_0.dtd&quot;</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">facelet-taglib</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">   </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">namespace</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain">http://richfaces.org/richx</span><span
		class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">namespace</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">    </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">tag</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">       </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">tag-name</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain">commandButton</span><span
		class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">tag-name</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">       </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">source</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain">templates/button.xhtml</span><span
		class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">source</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">    </span><span
		class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">tag</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">    </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">tag</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">        </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">tag-name</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain">actionMapper</span><span
		class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">tag-name</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">        </span><span
		class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">handler-class</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.richfaces.photoalbum.util.ActionMapperTagHandler</span><span
		class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">handler-class</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">    </span><span
		class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">tag</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">facelet-taglib</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">...</span><br />
</pre>
	<p>In order to use the <span class="bold"><strong><span
		class="property">&lt;richx:commandButton&gt;</span></strong></span> on the page the
	namespace of the taglib must be declared:</p>
	<pre  xml:space="preserve" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory"
		class="JAVA"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">...</span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ui:composition</span><span
		class="xml_plain"> </span><span class="xml_attribute_name">xmlns</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/1999/xhtml&quot;</span><span
		class="xml_plain"></span><br />
<span class="xml_plain">    ...</span><br />
<span class="xml_attribute_name">xmlns:richx</span><span
		class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://richfaces.org/richx&quot;</span><span
		class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">...</span><br />
</pre>
	<p>A more complex part of the button implementation, as we said
	earlier, is <span class="bold"><strong><span
		class="property">&lt;richx:actionMapper&gt;</span></strong></span> which is also
	described in tablib. But it is not just a simple tag-template since it
	has Facelets handler-class which specifies how it is handled when
	declared on the page. It is created because Facelets templates do not
	allow to make the MethodExpression a Facelets-template parameter.
	Please find below the code of the class(some irrelevant details are
	omitted):</p>
	<pre  xml:space="preserve" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory"
		class="JAVA"><!-- <br/> --><span class="java_separator">...</span>
<!--  --><br /><span class="java_plain">  </span><span
		class="java_keyword">public</span><span class="java_plain"> </span><span
		class="java_keyword">class</span><span class="java_plain"> </span><span
		class="java_type">ActionMapperTagHandler</span><span
		class="java_plain"> </span><span class="java_keyword">extends</span><span
		class="java_plain"> </span><span class="java_type">TagHandler</span><span
		class="java_plain"> </span><span class="java_separator">{</span>

<!--  --><br /><span class="java_plain">    </span><span
		class="java_keyword">private</span><span class="java_plain"> </span><span
		class="java_keyword">static</span><span class="java_plain"> </span><span
		class="java_keyword">final</span><span class="java_plain"> </span><span
		class="java_type">Class</span><span class="java_operator">&lt;?&gt;</span><span
		class="java_separator">[]</span><span class="java_plain"> ACTION_PARAM_TYPES </span><span
		class="java_operator">=</span><span class="java_plain"> </span><span
		class="java_keyword">new</span><span class="java_plain"> </span><span
		class="java_type">Class</span><span class="java_separator">[</span><span
		class="java_literal">0</span><span class="java_separator">];</span>

<!--  --><br /><span class="java_plain">    </span><span
		class="java_keyword">private</span><span class="java_plain"> </span><span
		class="java_keyword">static</span><span class="java_plain"> </span><span
		class="java_keyword">final</span><span class="java_plain"> </span><span
		class="java_type">Class</span><span class="java_operator">&lt;?&gt;</span><span
		class="java_separator">[]</span><span class="java_plain"> ACTION_LISTENER_PARAM_TYPES </span><span
		class="java_operator">=</span><span class="java_plain"> </span><span
		class="java_keyword">new</span><span class="java_plain"> </span><span
		class="java_type">Class</span><span class="java_separator">[]</span><span
		class="java_plain"> </span><span class="java_separator">{</span><span
		class="java_type">ActionEvent</span><span class="java_separator">.</span><span
		class="java_keyword">class</span><span class="java_separator">};</span>

<!--  --><br /><span class="java_plain">    </span><span
		class="java_keyword">private</span><span class="java_plain"> </span><span
		class="java_keyword">static</span><span class="java_plain"> </span><span
		class="java_keyword">final</span><span class="java_plain"> </span><span
		class="java_type">String</span><span class="java_plain"> ACTION </span><span
		class="java_operator">=</span><span class="java_plain"> </span><span
		class="java_literal">&quot;action&quot;</span><span
		class="java_separator">;</span>

<!--  --><br /><span class="java_plain">    </span><span
		class="java_keyword">private</span><span class="java_plain"> </span><span
		class="java_keyword">static</span><span class="java_plain"> </span><span
		class="java_keyword">final</span><span class="java_plain"> </span><span
		class="java_type">String</span><span class="java_plain"> ACTION_LISTENER </span><span
		class="java_operator">=</span><span class="java_plain"> </span><span
		class="java_literal">&quot;actionListener&quot;</span><span
		class="java_separator">;</span>

<!--  --><br /><span class="java_plain">    </span><span
		class="java_keyword">private</span><span class="java_plain"> </span><span
		class="java_keyword">static</span><span class="java_plain"> </span><span
		class="java_keyword">final</span><span class="java_plain"> </span><span
		class="java_type">String</span><span class="java_plain"> MAPPED_ACTION </span><span
		class="java_operator">=</span><span class="java_plain"> </span><span
		class="java_literal">&quot;mappedAction&quot;</span><span
		class="java_separator">;</span>
<!--  --><br /><span class="java_plain">    </span>
<!--  --><br /><span class="java_plain">    </span><span
		class="java_keyword">private</span><span class="java_plain"> </span><span
		class="java_keyword">static</span><span class="java_plain"> </span><span
		class="java_keyword">final</span><span class="java_plain"> </span><span
		class="java_type">String</span><span class="java_plain"> MAPPED_ACTION_LISTENER </span><span
		class="java_operator">=</span><span class="java_plain"> </span><span
		class="java_literal">&quot;mappedActionListener&quot;</span><span
		class="java_separator">;</span>

<!--  --><br /><span class="java_plain">    </span><span
		class="java_keyword">public</span><span class="java_plain"> </span><span
		class="java_type">ActionMapperTagHandler</span><span
		class="java_separator">(</span><span class="java_type">TagConfig</span><span
		class="java_plain"> config</span><span class="java_separator">)</span><span
		class="java_plain"> </span><span class="java_separator">{</span>
<!--  --><br /><span class="java_plain">        </span><span
		class="java_keyword">super</span><span class="java_separator">(</span><span
		class="java_plain">config</span><span class="java_separator">);</span>
<!--  --><br /><span class="java_plain">    </span><span
		class="java_separator">}</span>

<!--  --><br /><span class="java_plain">    </span><span
		class="java_keyword">private</span><span class="java_plain"> </span><span
		class="java_type">MethodExpression</span><span class="java_plain"> remap</span><span
		class="java_separator">(</span><span class="java_type">FaceletContext</span><span
		class="java_plain"> faceletContext</span><span
		class="java_separator">,</span><span class="java_plain"> </span><span
		class="java_type">String</span><span class="java_plain"> varName</span><span
		class="java_separator">,</span><span class="java_plain"> </span>
<!--  --><br /><span class="java_plain">            </span><span
		class="java_type">Class</span><span class="java_operator">&lt;?&gt;</span><span
		class="java_plain"> expectedReturnType</span><span
		class="java_separator">,</span><span class="java_plain"> </span><span
		class="java_type">Class</span><span class="java_operator">&lt;?&gt;</span><span
		class="java_separator">[]</span><span class="java_plain"> expectedParamTypes</span><span
		class="java_separator">)</span><span class="java_plain"> </span><span
		class="java_separator">{</span>
<!--  --><br /><span class="java_plain">        </span>
<!--  --><br /><span class="java_plain">        </span><span
		class="java_type">MethodExpression</span><span class="java_plain"> result </span><span
		class="java_operator">=</span><span class="java_plain"> </span><span
		class="java_literal">null</span><span class="java_separator">;</span>
<!--  --><br /><span class="java_plain">        </span>
<!--  --><br /><span class="java_plain">        </span><span
		class="java_type">VariableMapper</span><span class="java_plain"> mapper </span><span
		class="java_operator">=</span><span class="java_plain"> faceletContext</span><span
		class="java_separator">.</span><span class="java_plain">getVariableMapper</span><span
		class="java_separator">();</span>
<!--  --><br /><span class="java_plain">        </span><span
		class="java_type">ValueExpression</span><span class="java_plain"> valueExpression </span><span
		class="java_operator">=</span><span class="java_plain"> mapper</span><span
		class="java_separator">.</span><span class="java_plain">resolveVariable</span><span
		class="java_separator">(</span><span class="java_plain">varName</span><span
		class="java_separator">);</span>
<!--  --><br /><span class="java_plain">        </span><span
		class="java_keyword">if</span><span class="java_plain"> </span><span
		class="java_separator">(</span><span class="java_plain">valueExpression </span><span
		class="java_operator">!=</span><span class="java_plain"> </span><span
		class="java_literal">null</span><span class="java_separator">)</span><span
		class="java_plain"> </span><span class="java_separator">{</span>
<!--  --><br /><span class="java_plain">            </span><span
		class="java_type">ExpressionFactory</span><span class="java_plain"> ef </span><span
		class="java_operator">=</span><span class="java_plain"> faceletContext</span><span
		class="java_separator">.</span><span class="java_plain">getExpressionFactory</span><span
		class="java_separator">();</span>
<!--  --><br /><span class="java_plain">            </span><span
		class="java_type">ELContext</span><span class="java_plain"> elContext </span><span
		class="java_operator">=</span><span class="java_plain"> faceletContext</span><span
		class="java_separator">.</span><span class="java_plain">getFacesContext</span><span
		class="java_separator">().</span><span class="java_plain">getELContext</span><span
		class="java_separator">();</span>
<!--  --><br /><span class="java_plain">            </span>
<!--  --><br /><span class="java_plain">            result </span><span
		class="java_operator">=</span><span class="java_plain"> ef</span><span
		class="java_separator">.</span><span class="java_plain">createMethodExpression</span><span
		class="java_separator">(</span><span class="java_plain">elContext</span><span
		class="java_separator">,</span><span class="java_plain"> valueExpression</span><span
		class="java_separator">.</span><span class="java_plain">getExpressionString</span><span
		class="java_separator">(),</span><span class="java_plain"> </span>
<!--  --><br /><span class="java_plain">                expectedReturnType</span><span
		class="java_separator">,</span><span class="java_plain"> expectedParamTypes</span><span
		class="java_separator">);</span>
<!--  --><br /><span class="java_plain">        </span><span
		class="java_separator">}</span>
<!--  --><br /><span class="java_plain">        </span>
<!--  --><br /><span class="java_plain">        </span><span
		class="java_keyword">return</span><span class="java_plain"> result</span><span
		class="java_separator">;</span>
<!--  --><br /><span class="java_plain">    </span><span
		class="java_separator">}</span>
<!--  --><br /><span class="java_plain">    </span>
<!--  --><br /><span class="java_plain">    </span><span
		class="java_keyword">public</span><span class="java_plain"> </span><span
		class="java_type">void</span><span class="java_plain"> apply</span><span
		class="java_separator">(</span><span class="java_type">FaceletContext</span><span
		class="java_plain"> ctx</span><span class="java_separator">,</span><span
		class="java_plain"> </span><span class="java_type">UIComponent</span><span
		class="java_plain"> parent</span><span class="java_separator">)</span>
<!--  --><br /><span class="java_plain">            </span><span
		class="java_keyword">throws</span><span class="java_plain"> </span><span
		class="java_type">IOException</span><span class="java_separator">,</span><span
		class="java_plain"> </span><span class="java_type">FacesException</span><span
		class="java_separator">,</span><span class="java_plain"> </span><span
		class="java_type">FaceletException</span><span class="java_separator">,</span><span
		class="java_plain"> </span><span class="java_type">ELException</span><span
		class="java_plain"> </span><span class="java_separator">{</span>

<!--  --><br /><span class="java_plain">        </span><span
		class="java_type">MethodExpression</span><span class="java_plain"> actionExpression </span><span
		class="java_operator">=</span><span class="java_plain"> remap</span><span
		class="java_separator">(</span><span class="java_plain">ctx</span><span
		class="java_separator">,</span><span class="java_plain"> ACTION</span><span
		class="java_separator">,</span><span class="java_plain"> </span><span
		class="java_type">String</span><span class="java_separator">.</span><span
		class="java_keyword">class</span><span class="java_separator">,</span><span
		class="java_plain"> ACTION_PARAM_TYPES</span><span
		class="java_separator">);</span>
<!--  --><br /><span class="java_plain">        </span><span
		class="java_type">MethodExpression</span><span class="java_plain"> actionListenerExpression </span><span
		class="java_operator">=</span><span class="java_plain"> remap</span><span
		class="java_separator">(</span><span class="java_plain">ctx</span><span
		class="java_separator">,</span><span class="java_plain"> ACTION_LISTENER</span><span
		class="java_separator">,</span><span class="java_plain"> </span><span
		class="java_literal">null</span><span class="java_separator">,</span><span
		class="java_plain"> ACTION_LISTENER_PARAM_TYPES</span><span
		class="java_separator">);</span>
<!--  --><br /><span class="java_plain">        </span>
<!--  --><br /><span class="java_plain">        </span><span
		class="java_keyword">if</span><span class="java_plain"> </span><span
		class="java_separator">(</span><span class="java_plain">actionExpression </span><span
		class="java_operator">!=</span><span class="java_plain"> </span><span
		class="java_literal">null</span><span class="java_plain"> </span><span
		class="java_operator">||</span><span class="java_plain"> actionListenerExpression </span><span
		class="java_operator">!=</span><span class="java_plain"> </span><span
		class="java_literal">null</span><span class="java_separator">)</span><span
		class="java_plain"> </span><span class="java_separator">{</span>
<!--  --><br /><span class="java_plain">            </span><span
		class="java_type">VariableMapper</span><span class="java_plain"> initialVarMapper </span><span
		class="java_operator">=</span><span class="java_plain"> ctx</span><span
		class="java_separator">.</span><span class="java_plain">getVariableMapper</span><span
		class="java_separator">();</span>
<!--  --><br /><span class="java_plain">            </span><span
		class="java_keyword">try</span><span class="java_plain"> </span><span
		class="java_separator">{</span>
<!--  --><br /><span class="java_plain">                </span><span
		class="java_type">VariableMapperWrapper</span><span class="java_plain"> varMapper </span><span
		class="java_operator">=</span><span class="java_plain"> </span><span
		class="java_keyword">new</span><span class="java_plain"> </span><span
		class="java_type">VariableMapperWrapper</span><span
		class="java_separator">(</span><span class="java_plain">initialVarMapper</span><span
		class="java_separator">);</span>
<!--  --><br /><span class="java_plain">            </span>
<!--  --><br /><span class="java_plain">                </span><span
		class="java_keyword">if</span><span class="java_plain"> </span><span
		class="java_separator">(</span><span class="java_plain">actionExpression </span><span
		class="java_operator">==</span><span class="java_plain"> </span><span
		class="java_literal">null</span><span class="java_separator">)</span><span
		class="java_plain"> </span><span class="java_separator">{</span>
<!--  --><br /><span class="java_plain">                    actionExpression </span><span
		class="java_operator">=</span><span class="java_plain"> NOOP_ACTION_EXPRESSION</span><span
		class="java_separator">;</span>
<!--  --><br /><span class="java_plain">                </span><span
		class="java_separator">}</span>
<!--  --><br /><span class="java_plain">                </span>
<!--  --><br /><span class="java_plain">                varMapper</span><span
		class="java_separator">.</span><span class="java_plain">setVariable</span><span
		class="java_separator">(</span><span class="java_plain">MAPPED_ACTION</span><span
		class="java_separator">,</span><span class="java_plain"> </span>
<!--  --><br /><span class="java_plain">                    ctx</span><span
		class="java_separator">.</span><span class="java_plain">getExpressionFactory</span><span
		class="java_separator">().</span><span class="java_plain">createValueExpression</span><span
		class="java_separator">(</span><span class="java_plain">actionExpression</span><span
		class="java_separator">,</span><span class="java_plain"> </span>
<!--  --><br /><span class="java_plain">                        </span><span
		class="java_type">MethodExpression</span><span class="java_separator">.</span><span
		class="java_keyword">class</span><span class="java_separator">));</span>

<!--  --><br /><span class="java_plain">                </span><span
		class="java_keyword">if</span><span class="java_plain"> </span><span
		class="java_separator">(</span><span class="java_plain">actionListenerExpression </span><span
		class="java_operator">==</span><span class="java_plain"> </span><span
		class="java_literal">null</span><span class="java_separator">)</span><span
		class="java_plain"> </span><span class="java_separator">{</span>
<!--  --><br /><span class="java_plain">                    actionListenerExpression </span><span
		class="java_operator">=</span><span class="java_plain"> NOOP_ACTION_LISTENER_EXPRESSION</span><span
		class="java_separator">;</span>
<!--  --><br /><span class="java_plain">                </span><span
		class="java_separator">}</span>
<!--  --><br /><span class="java_plain">                varMapper</span><span
		class="java_separator">.</span><span class="java_plain">setVariable</span><span
		class="java_separator">(</span><span class="java_plain">MAPPED_ACTION_LISTENER</span><span
		class="java_separator">,</span><span class="java_plain"> </span>
<!--  --><br /><span class="java_plain">                        ctx</span><span
		class="java_separator">.</span><span class="java_plain">getExpressionFactory</span><span
		class="java_separator">().</span><span class="java_plain">createValueExpression</span><span
		class="java_separator">(</span><span class="java_plain">actionListenerExpression</span><span
		class="java_separator">,</span><span class="java_plain"> </span>
<!--  --><br /><span class="java_plain">                            </span><span
		class="java_type">MethodExpression</span><span class="java_separator">.</span><span
		class="java_keyword">class</span><span class="java_separator">));</span>
<!--  --><br /><span class="java_plain">                </span>
<!--  --><br /><span class="java_plain">                ctx</span><span
		class="java_separator">.</span><span class="java_plain">setVariableMapper</span><span
		class="java_separator">(</span><span class="java_plain">varMapper</span><span
		class="java_separator">);</span>
<!--  --><br /><span class="java_plain">                </span>
<!--  --><br /><span class="java_plain">                nextHandler</span><span
		class="java_separator">.</span><span class="java_plain">apply</span><span
		class="java_separator">(</span><span class="java_plain">ctx</span><span
		class="java_separator">,</span><span class="java_plain"> parent</span><span
		class="java_separator">);</span>
<!--  --><br /><span class="java_plain">                </span>
<!--  --><br /><span class="java_plain">            </span><span
		class="java_separator">}</span><span class="java_plain"> </span><span
		class="java_keyword">finally</span><span class="java_plain"> </span><span
		class="java_separator">{</span>
<!--  --><br /><span class="java_plain">                ctx</span><span
		class="java_separator">.</span><span class="java_plain">setVariableMapper</span><span
		class="java_separator">(</span><span class="java_plain">initialVarMapper</span><span
		class="java_separator">);</span>
<!--  --><br /><span class="java_plain">            </span><span
		class="java_separator">}</span>
<!--  --><br /><span class="java_plain">        </span><span
		class="java_separator">}</span><span class="java_plain"> </span><span
		class="java_keyword">else</span><span class="java_plain"> </span><span
		class="java_separator">{</span>
<!--  --><br /><span class="java_plain">            nextHandler</span><span
		class="java_separator">.</span><span class="java_plain">apply</span><span
		class="java_separator">(</span><span class="java_plain">ctx</span><span
		class="java_separator">,</span><span class="java_plain"> parent</span><span
		class="java_separator">);</span>
<!--  --><br /><span class="java_plain">        </span><span
		class="java_separator">}</span>
<!--  --><br /><span class="java_plain">    </span><span
		class="java_separator">}</span>
<!--  --><br /><span class="java_separator">}</span>
<!--  --><br /><span class="java_separator">...</span></pre>
	<p>You can find more infromation about Facelets, custom tags,
	taglibs, Facelets tag handlers and Facelets templates here.</p>
	</div>

</ui:composition>